#!/bin/bash
#
# Certificate Revocation Lab CLI - Wrapper script
#
# This allows running the CLI without manually activating the venv:
#     ./lab test
#     ./lab status
#     ./lab trigger --scenario "Ransomware Encryption Detected"
#

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Use venv Python if available, otherwise system Python
if [ -f "$SCRIPT_DIR/.venv/bin/python" ]; then
    PYTHON="$SCRIPT_DIR/.venv/bin/python"
elif [ -f "$SCRIPT_DIR/venv/bin/python" ]; then
    PYTHON="$SCRIPT_DIR/venv/bin/python"
else
    PYTHON="python3"
fi

# Run the CLI
exec "$PYTHON" -c "
import sys
sys.path.insert(0, '$SCRIPT_DIR')
from lab_cli.cli import cli
cli()
" "$@"
