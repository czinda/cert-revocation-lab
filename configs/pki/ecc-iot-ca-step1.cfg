# Dogtag PKI ECC IoT Sub-CA Configuration - Step 1: CSR Generation
# This CA issues certificates for IoT devices, subordinate to ECC Intermediate CA
# Uses ECDSA with NIST P-384 curve and SHA-384 signatures

[DEFAULT]
# Administrative credentials
pki_admin_email=admin@cert-lab.local
pki_admin_name=admin
pki_admin_password=${PKI_ADMIN_PASSWORD}
pki_admin_uid=admin

# Security passwords
pki_backup_password=${PKI_BACKUP_PASSWORD}
pki_client_database_password=${PKI_CLIENT_PKCS12_PASSWORD}
pki_client_pkcs12_password=${PKI_CLIENT_PKCS12_PASSWORD}
pki_token_password=${PKI_TOKEN_PASSWORD}

# Directory Server connection
pki_ds_url=ldap://ds-ecc-iot.cert-lab.local:3389
pki_ds_bind_dn=cn=Directory Manager
pki_ds_password=${DS_PASSWORD}
pki_ds_database=ecc-iot-ca
pki_ds_base_dn=dc=pki,dc=ecc-iot-ca

# Security domain - join the ECC security domain
pki_security_domain_hostname=ecc-root-ca.cert-lab.local
pki_security_domain_https_port=8443
pki_security_domain_name=CERT-LAB-ECC
pki_security_domain_user=admin
pki_security_domain_password=${PKI_ADMIN_PASSWORD}

# Instance configuration
pki_instance_name=pki-ecc-iot-ca
pki_https_port=8443
pki_http_port=8080
pki_ajp_port=8009
pki_tomcat_server_port=8005

# Hostname
pki_hostname=ecc-iot-ca.cert-lab.local

[CA]
# External CA signing - Step 1 generates CSR
pki_external=True
pki_external_step_two=False

# CSR output path - container mounts ./data/certs/ecc to /certs
pki_ca_signing_csr_path=/certs/iot-ca.csr

# CA Signing Certificate configuration - ECC P-384
pki_ca_signing_subject_dn=CN=IoT Sub-CA (ECC P-384),O=Cert-Lab,C=US
pki_ca_signing_key_algorithm=SHA384withEC
pki_ca_signing_key_size=nistp384
pki_ca_signing_key_type=ecc
pki_ca_signing_signing_algorithm=SHA384withEC

# OCSP Signing Certificate - ECC P-384
pki_ocsp_signing_subject_dn=CN=OCSP Signing Certificate,OU=ECC IoT CA,O=Cert-Lab,C=US
pki_ocsp_signing_key_algorithm=SHA384withEC
pki_ocsp_signing_key_size=nistp384
pki_ocsp_signing_key_type=ecc
pki_ocsp_signing_signing_algorithm=SHA384withEC

# Audit Signing Certificate - ECC P-384
pki_audit_signing_subject_dn=CN=Audit Signing Certificate,OU=ECC IoT CA,O=Cert-Lab,C=US
pki_audit_signing_key_algorithm=SHA384withEC
pki_audit_signing_key_size=nistp384
pki_audit_signing_key_type=ecc
pki_audit_signing_signing_algorithm=SHA384withEC

# Subsystem Certificate - ECC P-384
pki_subsystem_subject_dn=CN=Subsystem Certificate,OU=ECC IoT CA,O=Cert-Lab,C=US
pki_subsystem_key_algorithm=SHA384withEC
pki_subsystem_key_size=nistp384
pki_subsystem_key_type=ecc

# SSL Server Certificate - ECC P-384
pki_sslserver_subject_dn=CN=ecc-iot-ca.cert-lab.local,OU=ECC IoT CA,O=Cert-Lab,C=US
pki_sslserver_key_algorithm=SHA384withEC
pki_sslserver_key_size=nistp384
pki_sslserver_key_type=ecc

# Admin certificate
pki_admin_subject_dn=CN=PKI Administrator,OU=ECC IoT CA,O=Cert-Lab,C=US
